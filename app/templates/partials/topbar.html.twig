<div class="card topbar" style="margin-bottom:12px; display:flex; gap:12px; align-items:center; padding:8px 10px">
  <!-- Logos strip (scrolls horizontally if many) -->
  <div id="leagueStrip" class="league-strip" style="display:flex; gap:10px; align-items:center; overflow-x:auto; scrollbar-width:thin; -webkit-overflow-scrolling:touch; flex:1 1 auto; min-width:0">
    <!-- logos injected here -->
  </div>

  <!-- Right-side controls -->
  <div style="display:flex; gap:8px; flex:0 0 auto">
    <a class="btn" href="/" aria-label="Home" title="Home" style="padding:6px; display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px">
      <span aria-hidden="true" style="display:inline-flex; width:18px; height:18px">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
          <path fill="#e6edf3" d="M341.8 72.6C329.5 61.2 310.5 61.2 298.3 72.6L74.3 280.6C64.7 289.6 61.5 303.5 66.3 315.7C71.1 327.9 82.8 336 96 336L112 336L112 512C112 547.3 140.7 576 176 576L464 576C499.3 576 528 547.3 528 512L528 336L544 336C557.2 336 569 327.9 573.8 315.7C578.6 303.5 575.4 289.5 565.8 280.6L341.8 72.6zM304 384L336 384C362.5 384 384 405.5 384 432L384 528L256 528L256 432C256 405.5 277.5 384 304 384z"/>
        </svg>
      </span>
    </a>
  <div >
    <a class="btn" href="/search" aria-label="search" title="search" style="padding:6px; display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px">
      <span aria-hidden="true" style="display:inline-flex; width:18px; height:18px">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
        <path fill="#e6edf3" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
      </span>
    </a>
  </div>

  <button id="btnBack" class="btn" type="button" aria-label="Back" title="Back"
          style="padding:6px; display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px; background:#111827; border:#111827; cursor:pointer">
    <span aria-hidden="true" style="display:inline-flex; width:18px; height:18px">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
        <path fill="#e6edf3" d="M73.4 297.4C60.9 309.9 60.9 330.2 73.4 342.7L233.4 502.7C245.9 515.2 266.2 515.2 278.7 502.7C291.2 490.2 291.2 469.9 278.7 457.4L173.3 352L544 352C561.7 352 576 337.7 576 320C576 302.3 561.7 288 544 288L173.3 288L278.7 182.6C291.2 170.1 291.2 149.8 278.7 137.3C266.2 124.8 245.9 124.8 233.4 137.3L73.4 297.3z"/>
      </svg>
    </span>
  </button>
  </div>
</div>

<style>
/* nice hover for logos */
.league-link{ display:inline-flex; align-items:center; justify-content:center; width:32px; height:32px; border-radius:6px; border:1px solid #1f2937; background:#0b0f14; }
.league-link img{ width:24px; height:24px; object-fit:contain; display:block; }
.league-link:hover{ background:#111827; }
</style>

<script>
(function(){
  // Back button behavior (unchanged)
  const btn = document.getElementById('btnBack');
  if (btn) {
    const sameOriginRef = document.referrer && (new URL(document.referrer).origin === window.location.origin);
    const canGoBack = sameOriginRef || history.length > 1;
    btn.addEventListener('click', function () {
      if (canGoBack) history.back(); else window.location.href = '/';
    });
  }

  // Hydrate the logos strip
  const strip = document.getElementById('leagueStrip');
  if (!strip) return;

  fetch('/api/home-leagues', { headers: { 'Accept': 'application/json' }, cache: 'no-store' })
    .then(r => r.ok ? r.json() : [])
    .then(rows => {
      if (!Array.isArray(rows) || rows.length === 0) return;

      strip.innerHTML = rows.map(l => `
        <a class="league-link" href="/league/${l.slug}" title="${l.name}">
          <img src="${l.logo || ''}" alt="${l.name}">
        </a>
      `).join('');
    })
    .catch(() => { /* silent fail; leave strip empty */ });
})();
</script>

<script>
(function(){
  // Hide buttons on the homepage route
  if (window.location.pathname === '/' || window.location.pathname === '/index.php') {
    document.querySelectorAll('.topbar .btn[aria-label="Home"], .topbar #btnBack')
      .forEach(el => el.remove());
  }
})();
</script>
